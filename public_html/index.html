<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html lang="es">
    <head>
        <title>Common Ion Effect</title>
        <meta charset="UTF-8">
        <!--meta name="viewport" content="width=device-width, initial-scale=1.0"-->
    </head>
    
    <body>
        <h2 style="text-align: center">Solubility Product - Common Ion Effect</h2>
        
        <p>
            M<sub>m</sub>X<sub>x</sub> &#x21CC; mM + xX
        </p>
        
        <label>K<sub>s</sub> = </label><input type="text" id="constant"/>
        <br/><br/>
        <label>m= </label><input type="text" id="cation_coefficient"/>
        <br/><br/>
        <label>x= </label><input type="text" id="anion_coefficient"/>
        <br/><br/>
        <label>Cation excess: C<sub>M</sub> = </label><input type="text" id="cation_concentration"/> molL<sup>-1</sup>
        <br/><br/>
        
        <button type="button" onclick="calculate()">Calculate</button>
        <br/>
        
        <hr/>
        
        Solubility s = <label id="solubility_result"></label>
        <br/><br/>
        
        <div style="width:700px; height:400px; border:1px solid black; padding: 20px 20px 20px 20px">
            <div id="chart" style="width:700px; height:400px;"></div>
        </div>
        <!-- [if lt IE 9]><script src="js/excanvas.min.js"></script><![endif]-->
        
        <script src="js/flotr2.min.js"></script>
        <script>
            var alfa0 = [];
            var alfa1 = [];
            
            function calculate() {
                alfa0.length = 0;
                alfa1.length = 0;
                
                // Get the inputs
                var ks = parseFloat(document.getElementById("constant").value);
                var m = parseInt(document.getElementById("cation_coefficient").value);
                var x = parseInt(document.getElementById("anion_coefficient").value);
                
                // Check the inputs. Review this part for simultaneity. 
                if (isNaN(ks)) {
                    alert("Invalid value for the solubility product.");
                    return;
                }
                
                if (isNaN(m)) {
                    alert("Invalid value for the cation coefficient.");
                    return;
                }
                
                if (isNaN(x)) {
                    alert("Invalid value for the anion coefficient.");
                    return;
                }
                
                // Calculate the solubility in mol/L
                var s = Math.pow(ks/(Math.pow(m,m)*Math.pow(x,x)),1/(m+x));
                // Display the result
                document.getElementById("solubility_result").innerHTML = s.toString() + " molL<sup>-1</sup>";
                
//                for (var i = 0; i<=14; i+=0.1) {
//                    alfa0.push([i, Math.pow(10, -i)/(Math.pow(10, -i) + ka)]);
//                    alfa1.push([i, ka/(Math.pow(10, -i) + ka)]);
//                }
                
                //draw();
            }
            
            //function readConstant() {
                
            //}
            
//            function draw() {
//                Flotr.draw(
//                    document.getElementById("chart"),
//                    [
//                        {
//                            data: alfa0,
//                            label:"&#945<sub>0</sub> (acid)",
//                            lines: {
//                                show: true,
//                                lineWidth: 1
//                            },
//                            shadowSize: 0,
//                            color: "#FF0000"
//                        },
//                        {
//                            data: alfa1,
//                            label:"&#945<sub>1</sub> (base)",
//                            lines: {
//                                show: true,
//                                lineWidth: 1
//                            },
//                            shadowSize: 0,
//                            color: "#0000FF"
//                        }
//                        
//                    ],
//                    {
//                        //title: "Alpha Values",
//                        grid: {
//                            horizontalLines: true,
//                            verticalLines: true
//                        },
//                        yaxis: {
//                            min: 0,
//                            max: 1,
//                            title: "&#945",
//                            ticks: [0,0.25,0.5,0.75,1]
//                        },
//                        xaxis: {
//                            min: 0,
//                            max: 14,
//                            title: "pH",
//                            ticks: [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]
//                        }
//                    }
//                );
//            };
            
        </script>
    </body>
</html>